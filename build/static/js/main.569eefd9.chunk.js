(this["webpackJsonpskeleton-card"]=this["webpackJsonpskeleton-card"]||[]).push([[0],{160:function(e,t){},163:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(17),c=n.n(o),s=(n(88),n(89),n(90),n(91),n(10)),u=n(9),l=(n(96),n(18)),i=n.n(l),d=n(4),m=n(20),g=n(21),p=n(6),E=n.n(p),k=n(12),f={login:function(){var e=Object(k.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials",t),e.next=3,i.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=n(3),b=n(36),v=n(35),y=n.n(v),S="skeleton-card/redux/ducks/session/START_GAME_FAIL",h="skeleton-card/redux/ducks/session/DISPATCH_GAME_TO_CLIENTS",_="skeleton-card/redux/ducks/session/REMOVE_CLIENT_FROM_ROOM",j="skeleton-card/redux/ducks/session/SET_GAME",C="skeleton-card/redux/ducks/session/SET_HOST",T="skeleton-card/redux/ducks/session/SET_ROOM_FOR_SESSION",N="skeleton-card/redux/ducks/session/CLEAR_ROOM_FOR_SESSION";var x=function(e,t){return{type:"server/DISPATCH_GAME_TO_SOCKET",payload:{game:e,room:t}}},A="skeleton-card/redux/ducks/socket/SET_ROOM_SUCCESS",I="skeleton-card/redux/ducks/socket/SET_ROOM_PENDING",w="skeleton-card/redux/ducks/socket/SET_ROOM_FAIL",R="skeleton-card/redux/ducks/socket/SET_ROOM_STATE",G="skeleton-card/redux/ducks/socket/LEAVE_ROOM_SUCCESS",M="skeleton-card/redux/ducks/socket/SET_SOCKET_STATE",L="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_PENDING",P="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_SUCCESS",U="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_FAIL";var D=function(e){return{type:"skeleton-card/redux/ducks/socket/LEAVE_ROOM_FAIL",payload:e}},F=function(){return{type:"skeleton-card/redux/ducks/socket/LEAVE_ROOM_PENDING"}},H=function(e){return{type:"server/SET_SOCKET_USER",payload:{username:e.username,id:e.id,token:!!e.token}}},z="skeleton-card/redux/ducks/login/LOGIN_AUTH_SUCCESS",K="skeleton-card/redux/ducks/login/LOGIN_AUTH_FAIL",V="skeleton-card/redux/ducks/login/LOGIN_AUTH_PENDING",J="skeleton-card/redux/ducks/login/LOGOUT_PENDING",B="skeleton-card/redux/ducks/login/LOGOUT_SUCCESS",W="skeleton-card/redux/ducks/login/LOGOUT_FAIL";var q=function(e){return{type:z,payload:e}},X=function(e){return{type:K,error:e}},Y={loginUser:function(e,t){return function(){var n=Object(k.a)(E.a.mark((function n(r){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:V}),n.next=3,f.login({username:e,password:t}).then((function(e){r(H(e)),r(q(e))})).catch((function(e){return r(X(e))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},connectClient:function(){return function(){var e=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:L}),y()("http://localhost:3003").on("client connected",(function(e){return t({type:P,payload:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setSocketUser:H},$=Object(s.b)((function(e){return{users:e.users,login:e.login}}),Y)((function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(""),l=Object(u.a)(s,2),i=l[0],m=l[1];return a.a.createElement(d.f,null,a.a.createElement(d.q,null,a.a.createElement(d.d,{md:"4"},a.a.createElement("form",null,a.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),a.a.createElement("div",{className:"grey-text"},a.a.createElement(d.h,{value:o,onChange:function(e){return function(e){c(e.target.value)}(e)},label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right"}),a.a.createElement(d.h,{value:i,onChange:function(e){return function(e){m(e.target.value)}(e)},label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0})),a.a.createElement("div",{className:"text-center"},a.a.createElement(d.b,{onClick:function(t){return function(t){t.preventDefault();try{e.loginUser(o,i),c(""),m("")}catch(n){console.log("error")}}(t)}},"Login"))))))})),Q={logoutUser:function(){return function(){var e=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:J}),window.localStorage.removeItem("loggedUser"),t({type:B});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Z=Object(s.b)(null,Q)((function(e){return a.a.createElement(d.b,{onClick:function(){e.logoutUser()}},"Logout")})),ee={leaveRoom:function(e){return function(t){t(F());try{t(function(e){return{type:"server/DISPATCH_LEAVE_ROOM_TO_SOCKET",payload:e}}(e)),t({type:N})}catch(n){t(D(n))}}}},te=Object(s.b)((function(e){return{roomName:e.socket.room}}),ee)((function(e){return a.a.createElement(d.b,{onClick:function(){e.leaveRoom(e.roomName)}},"Leave Room")})),ne=Object(s.b)((function(e){return{login:e.login}}))((function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1];return a.a.createElement(m.b,null,a.a.createElement(d.k,{color:"indigo",dark:!0,expand:"md"},a.a.createElement(d.l,null,a.a.createElement("strong",{className:"white-text"},"skeleton card")),a.a.createElement(d.n,{onClick:function(){o(!n)}}),a.a.createElement(d.e,{id:"navbarCollapse3",isOpen:n,navbar:!0},a.a.createElement(d.m,{left:!0},a.a.createElement(d.i,{active:!0},a.a.createElement(d.j,{to:"/"},"Home")),a.a.createElement(d.i,null,a.a.createElement(d.j,{to:"/lobby"},"Lobby")),a.a.createElement(d.i,null,a.a.createElement(te,null)),a.a.createElement(d.i,null,a.a.createElement(Z,null))),a.a.createElement(d.m,{right:!0}))))})),re={createAccount:function(){var e=Object(k.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_PENDING",oe="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_SUCCESS",ce="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_FAIL";var se=function(e){return{type:ce,error:e}},ue={createAccount:function(e,t,n,r){return function(){var a=Object(k.a)(E.a.mark((function a(o){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o({type:ae}),a.next=3,re.createAccount({username:e,name:t,email:n,password:r}).then((function(e){o({type:oe})})).catch((function(e){return o(se(e))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},le=Object(s.b)((function(e){return{users:e.users,login:e.login}}),ue)((function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(""),l=Object(u.a)(s,2),i=l[0],m=l[1],g=Object(r.useState)(""),p=Object(u.a)(g,2),E=p[0],k=p[1],f=Object(r.useState)(""),O=Object(u.a)(f,2),b=O[0],v=O[1];return a.a.createElement(d.f,null,a.a.createElement(d.q,null,a.a.createElement(d.d,{md:"4"},a.a.createElement("form",null,a.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),a.a.createElement("div",{className:"grey-text"},a.a.createElement(d.h,{value:o,onChange:function(e){return function(e){c(e.target.value)}(e)},label:"username",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right"}),a.a.createElement(d.h,{value:b,onChange:function(e){return function(e){v(e.target.value)}(e)},label:"name",icon:"lock",group:!0,type:"email",validate:!0}),a.a.createElement(d.h,{value:E,onChange:function(e){return function(e){k(e.target.value)}(e)},label:"email",icon:"lock",group:!0,type:"email",validate:!0}),a.a.createElement(d.h,{value:i,onChange:function(e){return function(e){m(e.target.value)}(e)},label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0})),a.a.createElement("div",{className:"text-center"},a.a.createElement(d.b,{onClick:function(t){return function(t){t.preventDefault();try{e.createAccount(o,b,E,i),c(""),m(""),v(""),k(""),e.toggleCreateAccount()}catch(n){console.log("error")}}(t)}},"Create Account"),a.a.createElement(d.b,{onClick:function(){return e.toggleCreateAccount()}},"cancel"))))))})),ie={setRoomName:function(e){return function(t){t(function(e){return console.log("setting room state"),{type:R,payload:e}}(e)),t(function(e){return console.log(e),{type:"server/SET_ROOM",payload:e}}(e)),t(function(e){return{type:T,payload:e}}(e))}},dispatchRoomMessage:function(e,t){return{type:"server/DISPATCH_ROOM_MESSAGE_TO_SOCKET",payload:{roomName:e,message:t}}},setGame:function(e,t){return function(n){n({type:j,payload:e}),n(x(e,t))}},startGame:function(e){return function(t){console.log(e),t(function(e){return{type:"server/DISPATCH_START_GAME_TO_SOCKET",payload:e}}(e))}}},de=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),ie)((function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(!1),l=Object(u.a)(s,2),i=l[0],m=l[1],g=Object(r.useState)(""),p=Object(u.a)(g,2),E=p[0],k=p[1],f=Object(r.useState)("Choose a game"),O=Object(u.a)(f,2),b=O[0],v=O[1],y=function(e){k(e.target.value)},S=function(){e.dispatchRoomMessage(e.room,E),k("")};return e.login.user&&e.login.user.token?e.room?a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,e.session.selectedGame?e.session.selectedGame.gameName:"Choose a game"),a.a.createElement("h2",null,"Current Room: ",e.room),e.session.host?a.a.createElement("p",null,"You are the host"):null,a.a.createElement(d.c,null,e.games.games.map((function(t){return a.a.createElement(d.b,{onClick:function(t){return function(t){v(t.target.value);var n=e.games.games.filter((function(e){return e.gameName===t.target.value}))[0];e.setGame(n,e.socket.room)}(t)},value:t.gameName,key:t.gameName},t.gameName)}))),a.a.createElement(d.b,{onClick:function(){return"Choose a game"!==b&&e.startGame(e.session),void console.log("no game selected")}},"Start Game"),a.a.createElement("h2",null,"Users"),e.session.clients?e.session.clients.map((function(e,t){return a.a.createElement("p",{key:t},e.username)})):null,a.a.createElement("h2",null,"send users message"),a.a.createElement(d.b,{onClick:function(){return S()}},"Send Message To Room"),a.a.createElement(d.h,{value:E,onChange:function(e){return y(e)},label:"message",icon:"lock",group:!0,type:"email",validate:!0}),a.a.createElement("h3",null,"messages"),e.session.messages?e.session.messages.map((function(e,t){return e?a.a.createElement("p",{key:t},e.user,": ",e.message):null})):null):e.room?void 0:a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Home page. User: ",e.login.user.username," "),a.a.createElement(d.b,{onClick:function(){return e.setRoomName(o),void c("")}},"Create/Join Room"),a.a.createElement(d.h,{value:o,onChange:function(e){return function(e){c(e.target.value)}(e)},label:"create a room",icon:"lock",group:!0,type:"email",validate:!0}),a.a.createElement("h3",null,"Join Lobby"),a.a.createElement("h2",null,"send users message"),a.a.createElement(d.b,{onClick:function(){return S()}},"Send Message To Room"),a.a.createElement(d.h,{value:E,onChange:function(e){return y(e)},label:"type a message",icon:"lock",group:!0,type:"email",validate:!0})):i?a.a.createElement(le,{toggleCreateAccount:function(){return m(!i)},createAccount:i}):a.a.createElement(a.a.Fragment,null,a.a.createElement($,null),a.a.createElement(d.b,{onClick:function(){return m(!i)}},"create an account"))})),me=function(){return a.a.createElement("h1",null,"Lobby")},ge=function(){return i.a.get("/api/users").then((function(e){return e.data}))},pe="skeleton-card/redux/ducks/login/INIT_USERS_SUCCESS",Ee="skeleton-card/redux/ducks/login/INIT_USERS_FAIL",ke="skeleton-card/redux/ducks/login/INIT_USERS_PENDING";var fe=function(e){return{type:pe,payload:e}},Oe="skeleton-card/redux/ducks/games/SET_GAME",be="skeleton-card/redux/ducks/games/INIT_GAMES_PENDING",ve="skeleton-card/redux/ducks/games/INIT_GAMES_SUCCESS",ye="skeleton-card/redux/ducks/games/INIT_GAMES_FAIL";var Se=[{gameName:"seawitched",minPlayers:4,maxPlayers:10,roleDistribution:[{players:4,lookout:1,mutineer:1,mate:1,captain:1,good:1,evil:1},{players:5,lookout:1,mutineer:1,mate:1,captain:2,good:1,evil:1},{players:6,lookout:1,mutineer:1,mate:2,captain:2,good:1,evil:1},{players:7,lookout:1,mutineer:1,mate:3,captain:2,good:1,evil:1},{players:8,lookout:1,mutineer:2,mate:3,captain:2,good:1,evil:1},{players:9,lookout:1,mutineer:2,mate:3,captain:3,good:2,evil:2},{players:10,lookout:1,mutineer:2,mate:4,captain:3,good:2,evil:2}]},{gameName:"traitor",minPlayers:4,maxPlayers:10,roleDistribution:{4:{keyholder:1,traitor:1,guard:1,wizard:1,good:1,evil:1},5:{keyholder:1,traitor:1,guard:1,wizard:2,good:1,evil:1},6:{keyholder:1,traitor:1,guard:2,wizard:2,good:1,evil:1},7:{keyholder:1,traitor:1,guard:3,wizard:2,good:1,evil:1},8:{keyholder:1,traitor:2,guard:3,wizard:2,good:1,evil:1},9:{keyholder:1,traitor:2,guard:3,wizard:3,good:2,evil:2},10:{keyholder:1,traitor:2,guard:4,wizard:3,good:2,evil:2}}},{gameName:"werewolf",minPlayers:4,maxPlayers:10,roleDistribution:{3:{werewolves:2,seer:1,robber:1,troublemaker:1,villager:1},4:{werewolves:2,seer:1,robber:1,troublemaker:1,villager:2},5:{werewolves:2,seer:1,robber:1,troublemaker:1,villager:3}}}],he={initUsers:function(){return function(){var e=Object(k.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke}),e.prev=1,e.next=4,ge().then((function(e){return t(fe(e))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t((n=e.t0,{type:Ee,error:n}));case 9:case"end":return e.stop()}var n}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},initializeGames:function(e){return function(){var t=Object(k.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:be}),t.prev=1,t.next=4,n({type:ve,payload:e});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),n((r=t.t0,{type:ye,error:r}));case 9:case"end":return t.stop()}var r}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}},_e=Object(s.b)((function(e){return{users:e.users,login:e.login}}),he)((function(e){var t=Object(r.useState)(null),n=Object(u.a)(t,2),o=(n[0],n[1],Object(r.useState)(null)),c=Object(u.a)(o,2),s=(c[0],c[1]);return Object(r.useEffect)((function(){e.initUsers(),e.initializeGames(Se)}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);s(t)}}),[]),a.a.createElement("div",{className:"App"},a.a.createElement(m.a,null,a.a.createElement(ne,null),a.a.createElement(g.c,null,a.a.createElement(g.a,{path:"/"},a.a.createElement(de,null)),a.a.createElement(g.a,{path:"/lobby"},a.a.createElement(me,null)))))})),je=n(22),Ce=n(80),Te=n(81),Ne=n(82),xe=n.n(Ne),Ae=y()("http://localhost:3003"),Ie=xe()(Ae,"server/"),we=Object(je.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return Object(O.a)({},e,{initUsersPending:!0});case pe:return Object(O.a)({},e,{initUsersPending:!1,users:t.payload});case Ee:return Object(O.a)({},e,{error:t.error});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(O.a)({},e,{logoutPending:!0});case B:return Object(O.a)({},e,{logoutPending:!1,user:null});case W:return Object(O.a)({},e,{error:t.error});case V:return Object(O.a)({},e,{loading:!0});case z:return Object(O.a)({},e,{loading:!1,user:t.payload});case K:return Object(O.a)({},e,{loading:!1,error:"Error while authenticating user"});default:return e}},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(O.a)({},e,{createAccountPending:!0});case oe:return Object(O.a)({},e,{createAccountPending:!1,user:null});case ce:return Object(O.a)({},e,{error:t.error});default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{client:[],messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(O.a)({},e,{room:null,currentClientsInRoom:null,socket:t.payload});case I:return Object(O.a)({},e,{setRoomPending:!0});case A:return Object(O.a)({},e,{setRoomPending:!1,room:t.payload});case w:return Object(O.a)({},e,{error:t.error});case R:return Object(O.a)({},e,{room:t.payload});case"skeleton-card/redux/ducks/socket/DISPERSE_ROOM_MESSAGE":return console.log("dispersing message to room"),Object(O.a)({},e,{messages:[].concat(Object(b.a)(e.messages),[t.payload])});case"skeleton-card/redux/ducks/socket/SET_AVAILABLE_ROOMS":return console.log(t.payload),Object(O.a)({},e,{availableRooms:t.payload});case M:return console.log("hit the reducer for set socket state"),Object(O.a)({},e,{socket:Object(O.a)({},t.payload)});case"skeleton-card/redux/ducks/socket/SET_CLIENTS_IN_ROOM":return Object(O.a)({},e,{currentClientsInRoom:t.payload});case"skeleton-card/redux/ducks/socket/SET_SOCKET_ROOM_STATE":return Object(O.a)({},e,{socket:Object(O.a)({},e.socket,{socketRooms:t.payload})});case L:return Object(O.a)({},e,{connectSocketClientPending:!0});case P:return Object(O.a)({},e,{connectSocketClientPending:!1,client:t.payload});case U:return Object(O.a)({},e,{connectSocketClientPending:!1,error:t.error});default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(O.a)({},e,{gamesLoading:!1,games:t.payload});case be:return Object(O.a)({},e,{gamesLoading:!0});case ye:return Object(O.a)({},e,{gamesLoading:!1,error:t.error});case Oe:return Object(O.a)({},e,{selectedGame:e.games.filter((function(e){return e.gameName===t.payload}))[0]});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[],clients:[],host:!1,selectedGame:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(O.a)({},e,{room:null});case T:return Object(O.a)({},e,{room:t.payload});case _:return console.log("removing client"),Object(O.a)({},e,{clients:e.clients.filter((function(e){return e.socketId!==t.payload}))});case"skeleton-card/redux/ducks/session/SET_CLIENTS_IN_ROOM":return Object(O.a)({},e,{clients:t.payload});case h:return Object(O.a)({},e,{selectedGame:t.payload});case"skeleton-card/redux/ducks/session/DISPERSE_ROOM_MESSAGE_TO_CLIENTS":return console.log(t.payload),Object(O.a)({},e,{messages:[].concat(Object(b.a)(e.messages),[t.payload])});case"skeleton-card/redux/ducks/session/LOAD_EXISTING_MESSAGES":return Object(O.a)({},e,{messages:t.payload});case j:return Object(O.a)({},e,{selectedGame:t.payload});case C:return Object(O.a)({},e,{host:!0});case"skeleton-card/redux/ducks/session/START_GAME_SUCCESS":return Object(O.a)({},e,{startGamePending:!1});case S:return Object(O.a)({},e,{error:t.error});case"skeleton-card/redux/ducks/session/START_GAME_PENDING":return Object(O.a)({},e,{startGamePending:!0});default:return e}}}),Re=Object(je.createStore)(we,Object(Te.composeWithDevTools)(Object(je.applyMiddleware)(Ce.a,Ie)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Re.subscribe((function(){console.log("new client state",Re.getState())})),Re.dispatch({type:"server/hello",data:"hello"}),c.a.render(a.a.createElement(s.a,{store:Re},a.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){e.exports=n(163)},88:function(e,t,n){},96:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.569eefd9.chunk.js.map