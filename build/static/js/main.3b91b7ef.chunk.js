(this["webpackJsonpskeleton-card"]=this["webpackJsonpskeleton-card"]||[]).push([[0],{117:function(e,t){},121:function(e,t,a){e.exports=a(204)},126:function(e,t,a){},133:function(e,t,a){},197:function(e,t){},204:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),o=a.n(l),s=(a(126),a(127),a(128),a(8)),c=a(7),u=(a(133),a(27)),i=a.n(u),m=(a(35),a(32)),d=a(208),g=a(209),E=a(111),p=a(210),f=a(112),k=a(213),O=a(9),b=a.n(O),h=a(15),y={login:function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials",t),e.next=3,i.a.post("/api/login",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=a(6),S=a(63),C=a(53),j=a.n(C),N="skeleton-card/redux/ducks/session/START_GAME_FAIL",R="skeleton-card/redux/ducks/session/DISPATCH_GAME_TO_CLIENTS",x="skeleton-card/redux/ducks/session/REMOVE_CLIENT_FROM_ROOM",_="skeleton-card/redux/ducks/session/SET_GAME",I="skeleton-card/redux/ducks/session/SET_HOST",T="skeleton-card/redux/ducks/session/SET_ROOM_FOR_SESSION",G="skeleton-card/redux/ducks/session/CLEAR_ROOM_FOR_SESSION",w="skeleton-card/redux/ducks/session/SET_GAME_ROLES";var A=function(e,t){return{type:"server/DISPATCH_ROOM_MESSAGE_TO_SOCKET",payload:{roomName:e,message:t}}},M=function(e,t){return function(a){a({type:_,payload:e}),a(P(e,t))}},L=function(e){return function(t){console.log(e),t(function(e){return{type:"server/DISPATCH_START_GAME_TO_SOCKET",payload:e}}(e))}},P=function(e,t){return{type:"server/DISPATCH_GAME_TO_SOCKET",payload:{game:e,room:t}}},U="skeleton-card/redux/ducks/socket/SET_ROOM_SUCCESS",F="skeleton-card/redux/ducks/socket/SET_ROOM_PENDING",D="skeleton-card/redux/ducks/socket/SET_ROOM_FAIL",z="skeleton-card/redux/ducks/socket/SET_ROOM_STATE",B="skeleton-card/redux/ducks/socket/LEAVE_ROOM_SUCCESS",H="skeleton-card/redux/ducks/socket/SET_SOCKET_STATE",K="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_PENDING",V="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_SUCCESS",J="skeleton-card/redux/ducks/socket/CONNECT_CLIENT_FAIL";var Y=function(e){return{type:"skeleton-card/redux/ducks/socket/LEAVE_ROOM_FAIL",payload:e}},W=function(){return{type:"skeleton-card/redux/ducks/socket/LEAVE_ROOM_PENDING"}},X=function(e){return{type:"server/SET_SOCKET_USER",payload:{username:e.username,id:e.id,token:!!e.token}}},$=function(e){return function(t){t(function(e){return console.log("setting room state"),{type:z,payload:e}}(e)),t(function(e){return console.log(e),{type:"server/SET_ROOM",payload:e}}(e)),t(function(e){return{type:T,payload:e}}(e))}},q="skeleton-card/redux/ducks/login/LOGIN_AUTH_SUCCESS",Q="skeleton-card/redux/ducks/login/LOGIN_AUTH_FAIL",Z="skeleton-card/redux/ducks/login/LOGIN_AUTH_PENDING",ee="skeleton-card/redux/ducks/login/LOGOUT_PENDING",te="skeleton-card/redux/ducks/login/LOGOUT_SUCCESS",ae="skeleton-card/redux/ducks/login/LOGOUT_FAIL";var ne=function(e){return{type:q,payload:e}},re=function(e){return{type:Q,error:e}},le={loginUser:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:Z}),a.next=3,y.login({username:e,password:t}).then((function(e){n(X(e)),n(ne(e))})).catch((function(e){return n(re(e))}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},connectClient:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:K}),j()("http://localhost:3003").on("client connected",(function(e){return t({type:V,payload:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setSocketUser:X},oe=Object(s.b)((function(e){return{users:e.users,login:e.login}}),le)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),i=u[0],m=u[1],O=function(t,a){e.loginUser(t,a)};return r.a.createElement(d.a,null,r.a.createElement(g.a,{className:"text-center"},r.a.createElement(E.a,{className:"mt-2"},r.a.createElement(p.a,null,r.a.createElement(f.a,{variant:"success",className:"success",onClick:function(){return O("test1","test1")}},"Login test1"),r.a.createElement(f.a,{variant:"danger",onClick:function(){return O("test2","test2")}},"Login test2"),r.a.createElement(f.a,{variant:"warning",onClick:function(){return O("test3","test3")}},"Login test3"),r.a.createElement(f.a,{variant:"info",onClick:function(){return O("test4","test4")}},"Login test4")))),r.a.createElement("h1",null,"Log In"),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"Email address"),r.a.createElement(k.a.Control,{onChange:function(e){return function(e){o(e.target.value)}(e)},value:l,type:"email",placeholder:"Enter email"})),r.a.createElement(k.a.Group,{controlId:"formBasicPassword"},r.a.createElement(k.a.Label,null,"Password"),r.a.createElement(k.a.Control,{onChange:function(e){return function(e){m(e.target.value)}(e)},value:i,type:"password",placeholder:"Password"})),r.a.createElement(k.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(k.a.Check,{type:"checkbox",label:"Remember Me"})),r.a.createElement(f.a,{onClick:function(t){return function(t){t.preventDefault();try{e.loginUser(l,i),o(""),m("")}catch(a){console.log("error")}}(t)},variant:"primary",type:"submit"},"Submit")))))})),se=a(214),ce=a(216),ue=a(212),ie=a(16),me={logoutUser:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:ee}),window.localStorage.removeItem("loggedUser"),t({type:te});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},de=Object(s.b)(null,me)((function(e){return r.a.createElement(f.a,{onClick:function(){e.logoutUser()}},"Logout")})),ge={leaveRoom:function(e){return function(t){t(W());try{t(function(e){return{type:"server/DISPATCH_LEAVE_ROOM_TO_SOCKET",payload:e}}(e)),t({type:G})}catch(a){t(Y(a))}}}},Ee=Object(s.b)((function(e){return{roomName:e.socket.room}}),ge)((function(e){return r.a.createElement(f.a,{onClick:function(){e.leaveRoom(e.roomName)}},"Leave Room")})),pe=Object(s.b)((function(e){return{login:e.login}}))((function(){return r.a.createElement(ie.b,null,r.a.createElement(se.a,{bg:"light",expand:"lg"},r.a.createElement(se.a.Brand,{href:"#home"},"skeleton card"),r.a.createElement(se.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(se.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(ce.a,{className:"mr-auto"},r.a.createElement(ce.a.Link,{to:"/"},"Home"),r.a.createElement(ce.a.Link,{to:"/lobby"},"Lobby"),r.a.createElement(Ee,null),r.a.createElement(de,null),r.a.createElement(ue.a,{title:"Dropdown",id:"basic-nav-dropdown"},r.a.createElement(ue.a.Item,{href:"#action/3.1"},"Action"),r.a.createElement(ue.a.Item,{href:"#action/3.2"},"Another action"),r.a.createElement(ue.a.Item,{href:"#action/3.3"},"Something"),r.a.createElement(ue.a.Divider,null),r.a.createElement(ue.a.Item,{href:"#action/3.4"},"Separated link"))))))})),fe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},ke={createAccount:function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_PENDING",be="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_SUCCESS",he="skeleton-card/redux/ducks/account/CREATE_ACCOUNT_FAIL";var ye=function(e){return{type:he,error:e}},ve={createAccount:function(e,t,a,n){return function(){var r=Object(h.a)(b.a.mark((function r(l){return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l({type:Oe}),r.next=3,ke.createAccount({username:e,name:t,email:a,password:n}).then((function(e){l({type:be})})).catch((function(e){return l(ye(e))}));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},Se=Object(s.b)((function(e){return{users:e.users,login:e.login}}),ve)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),i=u[0],m=u[1],p=Object(n.useState)(""),O=Object(c.a)(p,2),b=O[0],h=O[1],y=Object(n.useState)(""),v=Object(c.a)(y,2),S=v[0],C=v[1];return r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{controlId:"formBasicUsername"},r.a.createElement(k.a.Label,null,"username"),r.a.createElement(k.a.Control,{value:l,onChange:function(e){return function(e){o(e.target.value)}(e)},type:"username",placeholder:"enter desired username"})),r.a.createElement(k.a.Group,{controlId:"formBasicUsername"},r.a.createElement(k.a.Label,null,"password"),r.a.createElement(k.a.Control,{value:i,onChange:function(e){return function(e){m(e.target.value)}(e)},type:"password",placeholder:"enter password"})),r.a.createElement(k.a.Group,{controlId:"formBasicUsername"},r.a.createElement(k.a.Label,null,"email"),r.a.createElement(k.a.Control,{value:b,onChange:function(e){return function(e){h(e.target.value)}(e)},type:"email",placeholder:"email"})),r.a.createElement(f.a,{onClick:function(t){return function(t){t.preventDefault();try{e.createAccount(l,S,b,i),o(""),m(""),C(""),h(""),e.toggleCreateAccount()}catch(a){console.log("error")}}(t)},variant:"primary",type:"submit"},"Create Account"),r.a.createElement(f.a,{onClick:function(){return e.toggleCreateAccount()}},"Cancel")))))})),Ce=a(211),je={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},Ne=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),je)((function(e){var t=Object(m.g)(),a=Object(n.useState)(""),l=Object(c.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(!1),i=Object(c.a)(u,2),d=i[0],p=i[1],O=Object(n.useState)(""),b=Object(c.a)(O,2),h=(b[0],b[1],Object(n.useState)("Choose a game")),y=Object(c.a)(h,2);y[0],y[1];return e.login.user&&e.login.user.token?e.room?r.a.createElement("h1",null,"Room: ",e.room):e.room?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(f.a,{className:"mt-2",variant:"warning",onClick:function(){return a="test",e.setRoomName(a),void t.push("/lobby");var a}},"Join Test Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,"Welcome, ",e.login.user.username))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"Room Name"),r.a.createElement(k.a.Text,null,"Create a room by using a new name, or join an existing room by typing in a matching name"),r.a.createElement(k.a.Control,{value:o,onChange:function(e){return function(e){s(e.target.value)}(e)},type:"email",placeholder:"enter room name"})),r.a.createElement(f.a,{onClick:function(){return e.setRoomName(o),s(""),void t.push("/lobby")},variant:"primary",type:"submit"},"Create/Join Room")))))):e.login.loading?r.a.createElement(fe,null):d?r.a.createElement(Se,{toggleCreateAccount:function(){return p(!d)},createAccount:d}):r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(f.a,{onClick:function(){return p(!d)},variant:"link"},"create an account"))})),Re=a(215),xe=a(22),_e=a.n(xe),Ie={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},Te=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),Ie)((function(e){var t=Object(n.useState)("Choose a game"),a=Object(c.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){console.log("loading lobby")}),[]);var s=function(){"Choose a game"!==l&&e.startGame(e.session),console.log("no game selected")};if(e.login.user&&e.login.user.token)return e.session.roleDistributed?(console.log("roles distributed"),r.a.createElement(m.a,{to:"/game"})):e.room?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(t){return function(t){console.log(t.target.value),t.preventDefault(),o(t.target.value);var a=e.games.games.filter((function(e){return e.gameName===t.target.value}))[0];e.setGame(a,e.socket.room)}(t)}},r.a.createElement(k.a.Group,{controlId:"exampleForm.SelectCustomSizeSm"},r.a.createElement(k.a.Label,null,"Select a Game"),r.a.createElement(k.a.Control,{as:"select",size:"sm",custom:!0},e.games.games.map((function(e){return r.a.createElement("option",{value:e.gameName,key:e.gameName},e.gameName)}))))))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,function(){if(e.session.selectedGame)return e.session.clients.length<e.session.selectedGame.minPlayers?r.a.createElement(Re.a,{key:_e()()},"Need at least ",e.session.selectedGame.minPlayers," to play"):e.session.clients.length>=e.session.selectedGame.maxPlayers?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Max Players Reached"),r.a.createElement(f.a,{onClick:function(){return s()}},"Start Game")):r.a.createElement(f.a,{onClick:function(){return s()}},"Start Game")}()))):r.a.createElement("h1",null,"error creating game select")})),Ge={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},we=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),Ge)((function(e){Object(m.g)();var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)("Choose a game"),u=Object(c.a)(s,2);u[0],u[1];Object(n.useEffect)((function(){console.log("loading lobby")}),[]);var i=function(e,t){return t.filter((function(t){return t.userId===e}))[0]};if(!e.login.user||!e.login.user.token)return e.login.loading?r.a.createElement(fe,null):r.a.createElement(m.a,{to:"/"});if(e.session.roleDistributed)switch(console.log("roles distributed"),console.log("current game:",e.session.selectedGame.gameName),e.session.selectedGame.gameName){case"seawitched":return r.a.createElement(m.a,{to:"/game/seawitched"});case"spyfall":return r.a.createElement(m.a,{to:"/game/spyfall"});case"traitor":return r.a.createElement(m.a,{to:"/game/traitor"});default:return r.a.createElement(m.a,{to:"/game"})}return e.room?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,e.session.selectedGame?e.session.selectedGame.gameName:"Choose a game"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Current Room: ",e.room),e.session.host?r.a.createElement("p",null,"You are the host"):null)),r.a.createElement(Te,null),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Users"),e.session.clients?e.session.clients.map((function(e,t){return r.a.createElement("p",{key:t},e.username)})):null,i(e.login.user.id,e.session.clients)?i(e.login.user.id,e.session.clients).role:null)),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(e){return function(e){o(e.target.value)}(e)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"type a message"),r.a.createElement(k.a.Control,{value:l,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Text,{className:"text-muted"},"send a message to the room"))),r.a.createElement(f.a,{onClick:function(){return e.dispatchRoomMessage(e.room,l),void o("")}},"Send Message To Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h3",null,"messages"),r.a.createElement("ul",{className:"list-group",style:{marginBottom:"5px",textAlign:"left"}},e.session.messages.length>0?e.session.messages.map((function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("li",{className:"list-group-item",key:_e()()},r.a.createElement("p",{style:{marginBottom:"0"}},r.a.createElement("strong",null,e.user,": "),e.message))))})):r.a.createElement("div",{className:"text-center mt-5 pt-5"},r.a.createElement("p",{className:"lead text-center"},"Fetching Messages"))))))):e.room?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"ERROR CREATING ROOM"))})),Ae={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},Me=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),Ae)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)("Choose a game"),u=Object(c.a)(s,2);u[0],u[1];Object(n.useEffect)((function(){console.log("loading lobby")}),[]);var i=function(e,t){return t.filter((function(t){return t.userId===e}))[0]};return e.login.user&&e.login.user.token?e.room?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,"Role: ",i(e.login.user.id,e.session.clients)?i(e.login.user.id,e.session.clients).role:null))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Current Users"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,e.session.clients?e.session.clients.map((function(e,t){return r.a.createElement("p",{key:t},e.username)})):null)),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(e){return function(e){o(e.target.value)}(e)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"type a message"),r.a.createElement(k.a.Control,{value:l,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Text,{className:"text-muted"},"send a message to the room"))),r.a.createElement(f.a,{onClick:function(){return e.dispatchRoomMessage(e.room,l),void o("")}},"Send Message To Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h3",null,"messages"),r.a.createElement("ul",{className:"list-group",style:{marginBottom:"5px",textAlign:"left"}},e.session.messages.length>0?e.session.messages.map((function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("li",{className:"list-group-item",key:_e()()},r.a.createElement("p",{style:{marginBottom:"0"}},r.a.createElement("strong",null,e.user,": "),e.message))))})):r.a.createElement("div",{className:"text-center mt-5 pt-5"},r.a.createElement("p",{className:"lead text-center"},"Fetching Messages")))))):e.room?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"ERROR CREATING ROOM")):e.login.loading?r.a.createElement(fe,null):r.a.createElement("h1",null,"No game data")})),Le=function(){return i.a.get("/api/users").then((function(e){return e.data}))},Pe="skeleton-card/redux/ducks/login/INIT_USERS_SUCCESS",Ue="skeleton-card/redux/ducks/login/INIT_USERS_FAIL",Fe="skeleton-card/redux/ducks/login/INIT_USERS_PENDING";var De=function(e){return{type:Pe,payload:e}},ze="skeleton-card/redux/ducks/games/SET_GAME",Be="skeleton-card/redux/ducks/games/INIT_GAMES_PENDING",He="skeleton-card/redux/ducks/games/INIT_GAMES_SUCCESS",Ke="skeleton-card/redux/ducks/games/INIT_GAMES_FAIL";var Ve=[{gameName:"seawitched",minPlayers:4,maxPlayers:10,roleDistribution:[{players:4,lookout:1,mutineer:1,mate:1,captain:1,good:1,evil:1,deck:["lookout","mutineer","mate","captain"],alignments:["good","evil"]},{players:5,lookout:1,mutineer:1,mate:1,captain:2,good:1,evil:1,deck:["lookout","mutineer","mate","captain","captain"],alignments:["good","evil"]},{players:6,lookout:1,mutineer:1,mate:2,captain:2,good:1,evil:1,deck:["lookout","mutineer","mate","mate","captain","captain"],alignments:["good","evil"]},{players:7,lookout:1,mutineer:1,mate:3,captain:2,good:1,evil:1,deck:["lookout","mutineer","mate","mate","mate","captain","captain"]},{players:8,lookout:1,mutineer:2,mate:3,captain:2,good:1,evil:1,deck:["lookout","mutineer","mutineer","mate","mate","mate","captain","captain"],alignments:["good","evil"]},{players:9,lookout:1,mutineer:2,mate:3,captain:3,good:2,evil:2,deck:["lookout","mutineer","mutineer","mate","mate","mate","captain","captain","captain"],alignments:["good","good","evil","evil"]},{players:10,lookout:1,mutineer:2,mate:4,captain:3,good:2,evil:2,deck:["lookout","mutineer","mutineer","mate","mate","mate","mate","captain","captain","captain"],alignments:["good","good","evil","evil"]}]},{gameName:"traitor",minPlayers:4,maxPlayers:10,roleDistribution:[{players:4,keyholder:1,traitor:1,guard:1,wizard:1,good:1,evil:1,deck:["keyholder","traitor","guard","wizard"],alignments:["good","evil"]},{players:5,keyholder:1,traitor:1,guard:1,wizard:2,good:1,evil:1,deck:["keyholder","traitor","guard","wizard","wizard"],alignments:["good","evil"]},{players:6,keyholder:1,traitor:1,guard:2,wizard:2,good:1,evil:1,deck:["keyholder","traitor","guard","guard","wizard","wizard"],alignments:["good","evil"]},{players:7,keyholder:1,traitor:1,guard:3,wizard:2,good:1,evil:1,deck:["keyholder","traitor","guard","guard","guard","wizard","wizard"],alignments:["good","evil"]},{players:8,keyholder:1,traitor:2,guard:3,wizard:2,good:1,evil:1,deck:["keyholder","traitor","traitor","guard","guard","guard","wizard","wizard"],alignments:["good","evil"]},{players:9,keyholder:1,traitor:2,guard:3,wizard:3,good:1,evil:1,deck:["keyholder","traitor","traitor","guard","guard","guard","wizard","wizard","wizard"],alignments:["good","good","evil","evil"]},{players:10,keyholder:1,traitor:2,guard:4,wizard:3,good:1,evil:1,deck:["keyholder","traitor","traitor","guard","guard","guard","guard","wizard","wizard","wizard"],alignments:["good","good","evil","evil"]}]},{gameName:"spyfall",minPlayers:3,maxPlayers:12,locations:["cemetary","racetrack","farm"]}],Je=a(217),Ye={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},We=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),Ye)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)("Choose a game"),u=Object(c.a)(s,2),i=(u[0],u[1],Object(n.useState)(!1)),p=Object(c.a)(i,2),O=p[0],b=p[1],h=Object(n.useState)(""),y=Object(c.a)(h,2),v=y[0],S=y[1],C=Object(n.useState)(!1),j=Object(c.a)(C,2),N=j[0],R=j[1];Object(n.useEffect)((function(){e.login.user&&e.session.selectedGame&&"spyfall"===e.session.selectedGame.gameName&&(console.log("loading lobby"),b(I(e.login.user.id,e.session.clients).isSpy),S(I(e.login.user.id,e.session.clients).location))}),[]);var x=function(e){o(e.target.value)},_=function(){e.dispatchRoomMessage(e.room,l),o("")},I=function(e,t){return t.filter((function(t){return t.userId===e}))[0]};if(!e.login.user||!e.login.user.token)return e.login.loading?r.a.createElement(fe,null):r.a.createElement(m.a,{to:"/"});if(e.room){if(O)return r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,"You are the SPY"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,"You must try to figure out the current location")),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(Je.a,null,e.session.selectedGame.locations.map((function(e){return r.a.createElement(Je.a.Item,null,e)}))))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(e){return x(e)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"type a message"),r.a.createElement(k.a.Control,{value:l,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Text,{className:"text-muted"},"send a message to the room"))),r.a.createElement(f.a,{onClick:function(){return _()}},"Send Message To Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h3",null,"messages"),r.a.createElement("ul",{className:"list-group",style:{marginBottom:"5px",textAlign:"left"}},e.session.messages.length>0?e.session.messages.map((function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("li",{className:"list-group-item",key:_e()()},r.a.createElement("p",{style:{marginBottom:"0"}},r.a.createElement("strong",null,e.user,": "),e.message))))})):r.a.createElement("div",{className:"text-center mt-5 pt-5"},r.a.createElement("p",{className:"lead text-center"},"Fetching Messages"))))));if(!O)return r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,"You are not the Spy"))),r.a.createElement(g.a,null,r.a.createElement(E.a,{className:"mt-2"},r.a.createElement(f.a,{onClick:function(){return R(!N)}},N?v:"view location"))),r.a.createElement(g.a,null,r.a.createElement(E.a,{className:"mt-2"},r.a.createElement(Je.a,{as:"ul"},e.session.selectedGame.locations.map((function(e){return r.a.createElement(Je.a.Item,{as:"li"},e)}))))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(e){return x(e)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"type a message"),r.a.createElement(k.a.Control,{value:l,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Text,{className:"text-muted"},"send a message to the room"))),r.a.createElement(f.a,{onClick:function(){return _()}},"Send Message To Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h3",null,"messages"),r.a.createElement("ul",{className:"list-group",style:{marginBottom:"5px",textAlign:"left"}},e.session.messages.length>0?e.session.messages.map((function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("li",{className:"list-group-item",key:_e()()},r.a.createElement("p",{style:{marginBottom:"0"}},r.a.createElement("strong",null,e.user,": "),e.message))))})):r.a.createElement("div",{className:"text-center mt-5 pt-5"},r.a.createElement("p",{className:"lead text-center"},"Fetching Messages"))))))}else if(!e.room)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"ERROR CREATING ROOM"))})),Xe={setRoomName:$,dispatchRoomMessage:A,setGame:M,startGame:L},$e=Object(s.b)((function(e){return{login:e.login,users:e.users,room:e.socket.room,socket:e.socket,usersInRoom:e.socket.currentClientsInRoom,games:e.games,session:e.session}}),Xe)((function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)("Choose a game"),u=Object(c.a)(s,2);u[0],u[1];Object(n.useEffect)((function(){console.log("loading lobby")}),[]);var i=function(e,t){return t.filter((function(t){return t.userId===e}))[0]};return e.login.user&&e.login.user.token?e.room?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h1",null,"Traitor Role: ",i(e.login.user.id,e.session.clients)?i(e.login.user.id,e.session.clients).role:null))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Current Users"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,e.session.clients?e.session.clients.map((function(e,t){return r.a.createElement("p",{key:t},e.username)})):null)),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{onChange:function(e){return function(e){o(e.target.value)}(e)}},r.a.createElement(k.a.Group,{controlId:"formBasicEmail"},r.a.createElement(k.a.Label,null,"type a message"),r.a.createElement(k.a.Control,{value:l,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Text,{className:"text-muted"},"send a message to the room"))),r.a.createElement(f.a,{onClick:function(){return e.dispatchRoomMessage(e.room,l),void o("")}},"Send Message To Room"))),r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("h3",null,"messages"),r.a.createElement("ul",{className:"list-group",style:{marginBottom:"5px",textAlign:"left"}},e.session.messages.length>0?e.session.messages.map((function(e){return r.a.createElement(g.a,null,r.a.createElement(E.a,null,r.a.createElement("li",{className:"list-group-item",key:_e()()},r.a.createElement("p",{style:{marginBottom:"0"}},r.a.createElement("strong",null,e.user,": "),e.message))))})):r.a.createElement("div",{className:"text-center mt-5 pt-5"},r.a.createElement("p",{className:"lead text-center"},"Fetching Messages")))))):e.room?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"ERROR CREATING ROOM")):e.login.loading?r.a.createElement(fe,null):r.a.createElement("h1",null,"No game data")})),qe=a(117),Qe=a.n(qe),Ze={initUsers:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Fe}),e.prev=1,e.next=4,Le().then((function(e){return t(De(e))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t((a=e.t0,{type:Ue,error:a}));case 9:case"end":return e.stop()}var a}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},initializeGames:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Be}),t.prev=1,t.next=4,a({type:He,payload:e});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),a((n=t.t0,{type:Ke,error:n}));case 9:case"end":return t.stop()}var n}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}},et=Object(s.b)((function(e){return{users:e.users,login:e.login,session:e.session}}),Ze)((function(e){var t=Object(n.useState)(null),a=Object(c.a)(t,2),l=(a[0],a[1],Object(n.useState)(null)),o=Object(c.a)(l,2),s=(o[0],o[1]);return Object(n.useEffect)((function(){e.initializeGames(Ve)}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);s(t)}}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(pe,null),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(Ne,null)),r.a.createElement(m.b,{path:"/lobby"},r.a.createElement(we,null)),r.a.createElement(m.b,{path:"/game/spyfall"},r.a.createElement(We,null)),r.a.createElement(m.b,{path:"/game/traitor"},r.a.createElement($e,null)),r.a.createElement(m.b,{path:"/game/seawitched"},r.a.createElement(Qe.a,null)),r.a.createElement(m.b,{path:"/game"},r.a.createElement(Me,null))))})),tt=a(36),at=a(118),nt=a(119),rt=a(120),lt=a.n(rt),ot=j()("http://localhost:3003"),st=lt()(ot,"server/"),ct=Object(tt.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(v.a)({},e,{initUsersPending:!0});case Pe:return Object(v.a)({},e,{initUsersPending:!1,users:t.payload});case Ue:return Object(v.a)({},e,{error:t.error});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(v.a)({},e,{logoutPending:!0});case te:return Object(v.a)({},e,{logoutPending:!1,user:null});case ae:return Object(v.a)({},e,{error:t.error});case Z:return Object(v.a)({},e,{loading:!0});case q:return Object(v.a)({},e,{error:null,loading:!1,user:t.payload});case Q:return Object(v.a)({},e,{loading:!1,error:"Error while authenticating user"});default:return e}},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(v.a)({},e,{createAccountPending:!0});case be:return Object(v.a)({},e,{createAccountPending:!1,user:null});case he:return Object(v.a)({},e,{error:t.error});default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{client:[],messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(v.a)({},e,{room:null,currentClientsInRoom:null,socket:t.payload});case F:return Object(v.a)({},e,{setRoomPending:!0});case U:return Object(v.a)({},e,{setRoomPending:!1,room:t.payload});case D:return Object(v.a)({},e,{error:t.error});case z:return Object(v.a)({},e,{room:t.payload});case"skeleton-card/redux/ducks/socket/DISPERSE_ROOM_MESSAGE":return console.log("dispersing message to room"),Object(v.a)({},e,{messages:[].concat(Object(S.a)(e.messages),[t.payload])});case"skeleton-card/redux/ducks/socket/SET_AVAILABLE_ROOMS":return console.log(t.payload),Object(v.a)({},e,{availableRooms:t.payload});case H:return console.log("hit the reducer for set socket state"),Object(v.a)({},e,{socket:Object(v.a)({},t.payload)});case"skeleton-card/redux/ducks/socket/SET_CLIENTS_IN_ROOM":return Object(v.a)({},e,{currentClientsInRoom:t.payload});case"skeleton-card/redux/ducks/socket/SET_SOCKET_ROOM_STATE":return Object(v.a)({},e,{socket:Object(v.a)({},e.socket,{socketRooms:t.payload})});case K:return Object(v.a)({},e,{connectSocketClientPending:!0});case V:return Object(v.a)({},e,{connectSocketClientPending:!1,client:t.payload});case J:return Object(v.a)({},e,{connectSocketClientPending:!1,error:t.error});default:return e}},games:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return Object(v.a)({},e,{gamesLoading:!1,games:t.payload});case Be:return Object(v.a)({},e,{gamesLoading:!0});case Ke:return Object(v.a)({},e,{gamesLoading:!1,error:t.error});case ze:return Object(v.a)({},e,{selectedGame:e.games.filter((function(e){return e.gameName===t.payload}))[0]});default:return e}},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[],clients:[],host:!1,selectedGame:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(v.a)({},e,{room:null});case T:return Object(v.a)({},e,{room:t.payload});case x:return console.log("removing client"),Object(v.a)({},e,{clients:e.clients.filter((function(e){return e.socketId!==t.payload}))});case"skeleton-card/redux/ducks/session/SET_CLIENTS_IN_ROOM":return Object(v.a)({},e,{clients:t.payload});case R:return Object(v.a)({},e,{selectedGame:t.payload});case"skeleton-card/redux/ducks/session/DISPERSE_ROOM_MESSAGE_TO_CLIENTS":return console.log(t.payload),Object(v.a)({},e,{messages:[].concat(Object(S.a)(e.messages),[t.payload])});case"skeleton-card/redux/ducks/session/LOAD_EXISTING_MESSAGES":return Object(v.a)({},e,{messages:t.payload});case _:return Object(v.a)({},e,{selectedGame:t.payload});case I:return Object(v.a)({},e,{host:!0});case w:return Object(v.a)({},e,{roleDistributed:!0,clients:t.payload});case"skeleton-card/redux/ducks/session/START_GAME_SUCCESS":return Object(v.a)({},e,{startGamePending:!1});case N:return Object(v.a)({},e,{error:t.error});case"skeleton-card/redux/ducks/session/START_GAME_PENDING":return Object(v.a)({},e,{startGamePending:!0});default:return e}}}),ut=Object(tt.createStore)(ct,Object(nt.composeWithDevTools)(Object(tt.applyMiddleware)(at.a,st)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ut.subscribe((function(){console.log("new client state",ut.getState())})),ut.dispatch({type:"server/hello",data:"hello"}),o.a.render(r.a.createElement(s.a,{store:ut},r.a.createElement(ie.a,null,r.a.createElement(et,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.3b91b7ef.chunk.js.map